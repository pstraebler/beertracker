<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord - BeerTracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="navbar">
        <div class="navbar-content">
            <h2>üç∫ BeerTracker - {{ username }}</h2>
            <a href="/logout" class="btn-secondary">D√©connexion</a>
        </div>
    </div>
    
    <div class="container">
        <div class="top-section">
            <div class="card">
                <h3>Ajouter une consommation</h3>
                     <div class="date-section">
                        <div class="date-select">
                            <label for="today-date">Date</label>
                            <input type="date" id="today-date">
                        </div>
                        <button id="night-mode-btn" class="btn-primary" onclick="toggleNightMode()" style="background-color: #3498db; width: auto; padding: 0.75rem 1.5rem;">
                            üåô Activer Mode Soir√©e
                        </button>
                    </div>
                
                <div class="beer-selector">
                    <div class="beer-type">
                        <label>Pintes (50cl)</label>
                        <div class="quantity-control">
                            <button class="btn-minus" onclick="changeBeer('pints', -1)">‚àí</button>
                            <span id="pints-count">0</span>
                            <button class="btn-plus" onclick="changeBeer('pints', 1)">+</button>
                        </div>
                    </div>
                    
                    <div class="beer-type">
                        <label>Demis (25cl)</label>
                        <div class="quantity-control">
                            <button class="btn-minus" onclick="changeBeer('half_pints', -1)">‚àí</button>
                            <span id="half_pints-count">0</span>
                            <button class="btn-plus" onclick="changeBeer('half_pints', 1)">+</button>
                        </div>
                    </div>
                    
                    <div class="beer-type">
                        <label>33cl</label>
                        <div class="quantity-control">
                            <button class="btn-minus" onclick="changeBeer('liters_33', -1)">‚àí</button>
                            <span id="liters_33-count">0</span>
                            <button class="btn-plus" onclick="changeBeer('liters_33', 1)">+</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="stats-section">
            <div class="card">
                <h3>Statistiques</h3>
                <div class="date-range">
                    <label>Depuis le</label>
                    <input type="date" id="start-date">
                    <label>jusqu'au</label>
                    <input type="date" id="end-date">
                    <button class="btn-secondary" onclick="updateStats()">Mettre √† jour</button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">Total</div>
                        <div class="stat-value"><span id="total-liters">0</span>L</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Pintes</div>
                        <div class="stat-value" id="total-pints">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Demis</div>
                        <div class="stat-value" id="total-half">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">33cl</div>
                        <div class="stat-value" id="total-33">0</div>
                    </div>
                    <div class="stat-box" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                        <div class="stat-label">Co√ªt estim√©</div>
                        <div class="stat-value"><span id="total-cost">0</span>‚Ç¨</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="warnings-section" id="warnings-container" style="display:none;">
            <div class="card warning">
                <h3>‚ö†Ô∏è Alerte</h3>
                <div id="warnings-list"></div>
            </div>
        </div>
        
        <div class="charts-section">
            <div class="card">
                <h3>Consommation par mois</h3>
                <div style="position: relative; height: 300px;">
                    <canvas id="monthlyChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h3>üìä Consommation sur les 4 derni√®res semaines</h3>
                <div style="position: relative; height: 300px;">
                    <canvas id="weeklyChart"></canvas>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>Timeline totale</h3>
            <div style="position: relative; height: 300px;">
                <canvas id="totalChart"></canvas>
            </div>
        </div>
        
        <div class="export-section">
            <div class="card">
                <h3>Exporter vos donn√©es</h3>
                <button class="btn-secondary" onclick="exportData()">T√©l√©charger en CSV</button>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
